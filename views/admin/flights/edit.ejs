<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/form.css" />
  </head>
  <body>
    <%- include('../../partials/navbar', { user: user }) %>

    <div class="form-container">
      <h1 class="text-center"><%= title %></h1>

      <% if (error) { %>
      <div class="error-message"><%= error %></div>
      <% } %>

      <form method="POST" action="/admin/flights/<%= flight.flight_id %>?_method=PUT">
        <div class="form-group">
          <label>Origin Airport Code:</label>
          <input
            type="text"
            name="origin_airport_code"
            value="<%= flight.origin_airport_code %>"
            required
          />
        </div>

        <div class="form-group">
          <label>Destination Airport Code:</label>
          <input
            type="text"
            name="destination_airport_code"
            value="<%= flight.destination_airport_code %>"
            required
          />
        </div>

        <div class="form-group">
          <label>Flight Type:</label>
          <select name="direct_indirect_flag" required>
            <option value="direct" <%= flight.direct_indirect_flag === 'direct' ? 'selected' : '' %>>Direct</option>
            <option value="indirect" <%= flight.direct_indirect_flag === 'indirect' ? 'selected' : '' %>>Indirect</option>
          </select>
        </div>

        <div class="form-group">
          <label>Return Option:</label>
          <select name="return_option_flag" required>
            <option value="false" <%= !flight.return_option_flag ? 'selected' : '' %>>No</option>
            <option value="true" <%= flight.return_option_flag ? 'selected' : '' %>>Yes</option>
          </select>
        </div>

        <div class="form-group">
          <label>Scheduled Departure:</label>
          <input
            type="datetime-local"
            name="scheduled_departure"
            value="<%= new Date(flight.scheduled_departure).toISOString().slice(0,16) %>"
            required
          />
        </div>

        <div class="form-group">
          <label>Scheduled Arrival:</label>
          <input
            type="datetime-local"
            name="scheduled_arrival"
            value="<%= new Date(flight.scheduled_arrival).toISOString().slice(0,16) %>"
            required
          />
        </div>

        <button type="submit">Update Flight</button>
      </form>

      <p class="text-center">
        <a class="back-link" href="/admin/flights">Back to Flights</a>
      </p>
    </div>
  </body>
</html>
